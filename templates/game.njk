{% extends "base.njk" %}

{% block title %}{{ game.title }} - Exeloth Codex{% endblock %}

{# Style khusus untuk halaman game dashboard #}
{% block head %}
<style>
    body { 
        padding-top: 0 !important;
        background-color: #34353a; 
    }
    .navbar.fixed-top, footer.bg-darker { 
        display: none !important;
    }

    /* --- UPDATE KASUS 1: Background & Logo --- */
    
    /* 1. Container untuk Background Image */
    .game-bg-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 85vh; /* Tinggi gambar tidak sampai full ke bawah agar fade out natural */
        background-image: url('/assets/img/games/background-wuthering-waves.jpg'); /* Pastikan nama file sesuai */
        background-size: cover;
        background-position: center top;
        opacity: 0.15; /* Opasitas sangat rendah sesuai request */
        z-index: 0; /* Di belakang konten */
        
        /* Efek Fade Out di bagian bawah gambar */
        -webkit-mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
        mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
        pointer-events: none; /* Agar klik tembus ke belakang */
    }

    /* 2. Memastikan Konten berada di atas Background */
    .content-wrapper {
        position: relative;
        z-index: 1;
    }

    /* Style Logo */
    .game-logo-img {
        max-width: 250px; /* Ukuran logo */
        width: 100%;
        height: auto;
        display: block;
        margin-bottom: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-wrapper position-relative">
    
    <nav id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand">EXELOTH CODEX</div>
            <div id="dismiss">
                <i class="bi bi-x-lg"></i>
            </div>
        </div>

        <ul class="list-unstyled sidebar-menu">
            <li><a href="#" class="active"><i class="bi bi-info-circle"></i> Overview</a></li>
            <li><a href="#"><i class="bi bi-book"></i> Cerita Utama</a></li>
            <li><a href="#"><i class="bi bi-people"></i> Cerita Karakter</a></li>
            <li><a href="#"><i class="bi bi-calendar-event"></i> Cerita Event</a></li>
            <li><a href="#"><i class="bi bi-archive"></i> Arsip Lore</a></li>
        </ul>

        <div class="sidebar-footer">
            <a href="/" class="text-decoration-none text-light d-flex align-items-center gap-2">
                <i class="bi bi-arrow-left"></i> Kembali
            </a>
        </div>
    </nav>

    <div id="content" class="position-relative">
        
        <div class="game-bg-overlay"></div>

        <div class="top-bar position-relative z-1"> <div class="d-flex align-items-center gap-3">
                <button type="button" id="sidebarCollapse">
                    <i class="bi bi-list"></i>
                </button>
            </div>
            <div class="d-flex align-items-center gap-4">
                <a href="https://saweria.co" target="_blank" class="text-white text-decoration-none fw-bold">Saweria</a>
                <div class="user-profile">
                    <img src="https://ui-avatars.com/api/?name=User&background=ff6b6b&color=fff" class="rounded-circle" width="40" height="40" alt="Profile">
                </div>
            </div>
        </div>

        <div class="container-fluid px-4 content-wrapper">
            <div class="d-flex justify-content-end mb-4">
                <button class="btn btn-favorite text-white border-danger">
                    <i class="bi bi-star me-1"></i> Favorit
                </button>
            </div>

            <div class="mt-5 text-start"> <div class="row">
                    <div class="col-lg-8">
                        <img src="/assets/img/games/logo-wuthering-waves.jpg" alt="{{ game.title }} Logo" class="game-logo-img">

                        <h1 class="fw-bold mb-4 text-white">Tentang Game</h1>
                        
                        <div class="text-white-50">
                            <p id="game-description-placeholder" class="lead">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
                                Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                            </p>
                            <div id="game-profile-container" style="display:none;"></div> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Tombol Toggle Sidebar
    const sidebar = document.getElementById('sidebar');
    const dismissBtn = document.getElementById('dismiss');
    const collapseBtn = document.getElementById('sidebarCollapse');

    dismissBtn.addEventListener('click', function() {
        sidebar.classList.add('active');
    });

    collapseBtn.addEventListener('click', function() {
        sidebar.classList.remove('active');
    });
});
</script>
{% endblock %}